{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["const wrapper = document.getElementById('feedback-wrapper');\nconst paginationContainer = document.getElementById('pagination');\nlet swiperInstance;\n\nasync function fetchFeedbacks() {\n    try {\n        wrapper.innerHTML = '<div class=\"swiper-slide loading\">Завантаження відгуків...</div>';\n\n        // !ВАЖЛИВО: Замініть цей URL на коректний URL API, який повертає 3 відгуки.\n        // Або, якщо API може повернути більше, ми візьмемо перші 3.\n        const response = await axios.get('https://sound-wave.b.goit.study/api/feedbacks', {\n            params: {\n                limit: 3, // Запит на 3 відгуки\n                page: 1\n            }\n        });\n        let feedbacks = response.data.data;\n            console.log(feedbacks);\n            \n\n        // Якщо API повертає більше відгуків, ніж 3, беремо лише перші 3.\n        if (feedbacks && feedbacks.length > 3) {\n            feedbacks = feedbacks.slice(0, 3);\n        }\n\n        // Тимчасові дані для тестування, якщо API все ще не працює або повертає мало даних\n        if (!feedbacks || feedbacks.length === 0) {\n            //  feedbacks = [\n            //      { name: 'Емілі Джонсон', descr: \"ArtistsHub has transformed the way I discover new music. It's like having a personal DJ that knows my taste perfectly!\", rating: 5 },\n            //      { name: 'Майк Сміт', descr: \"Неймовірно! Цей додаток змінив мій погляд на вибір музики. Я в захваті від рекомендацій.\", rating: 4 },\n            //      { name: 'Сара Браун', descr: \"Просто ідеально! Я завжди знаходжу щось нове та цікаве. Дякую за такий чудовий сервіс.\", rating: 5 },\n            //  ];\n        }\n        // Забезпечуємо, що завжди буде 3 відгуки для Swiper\n        while (feedbacks.length < 3) {\n             feedbacks.push({ name: `Користувач ${feedbacks.length + 1}`, descr: 'Наразі немає додаткових відгуків для відображення.', rating: 3 });\n        }\n\n\n        renderFeedbacks(feedbacks);\n        initSwiper();\n        initPaginationControls(); // Обробники для кнопок, пагінація буде створюватись в initSwiper\n\n    } catch (err) {\n        console.error('Помилка при завантаженні відгуків', err);\n        showErrorMessage();\n    }\n}\n\nfunction renderFeedbacks(feedbacks) {\n    wrapper.innerHTML = '';\n\n    feedbacks.forEach(fb => {\n        const roundedRating = Math.round(fb.rating);\n        const slide = document.createElement('div');\n        slide.className = 'swiper-slide';\n        slide.innerHTML = `\n            <div class=\"rating\">\n                ${generateStarRating(roundedRating)}\n            </div>\n            <div class=\"text\">\"${fb.descr}\"</div>\n            <div class=\"user\">${fb.name}</div>\n        `;\n        wrapper.appendChild(slide);\n    });\n}\n\n// Функція для генерації зірочок Font Awesome\nfunction generateStarRating(rating) {\n    let starsHtml = '';\n    for (let i = 1; i <= 5; i++) {\n        if (i <= rating) {\n            starsHtml += '<i class=\"fas fa-star star\"></i>'; // Заповнена зірка\n        } else {\n            starsHtml += '<i class=\"far fa-star star-empty\"></i>'; // Порожня зірка\n        }\n    }\n    return starsHtml;\n}\n\n\nfunction initSwiper() {\n    if (swiperInstance) {\n        swiperInstance.destroy(true, true);\n    }\n\n    // Ініціалізуємо Swiper з кількістю слайдів 3\n    swiperInstance = new Swiper('.swiper-container', {\n        loop: true,\n        slidesPerView: 1,\n        spaceBetween: 0,\n        centeredSlides: true, // Забезпечує, що активний слайд по центру\n        // autoHeight: true, // Додайте це, якщо висота відгуків може сильно відрізнятися\n        observer: true,\n        observeParents: true,\n        watchOverflow: true, // Допомагає Swiper краще адаптуватися до контенту\n        // slidesOffsetBefore: 0, // Переконайтеся, що немає зайвих відступів\n        // slidesOffsetAfter: 0,  // Переконайтеся, що немає зайвих відступів\n        on: {\n            slideChange: updatePagination,\n            init: updatePagination,\n        }\n    });\n\n    // Створюємо 3 точки пагінації\n    createPaginationDots(3);\n    updatePagination();\n}\n\nfunction createPaginationDots(totalDots) {\n    paginationContainer.innerHTML = ''; // Очищаємо попередні точки\n\n    for (let i = 0; i < totalDots; i++) {\n        const dot = document.createElement('span');\n        dot.id = `pag-${i}`;\n        dot.addEventListener('click', () => {\n            if (swiperInstance) {\n                // Swiper у режимі loop може мати більше \"реальних\" слайдів, ніж видно.\n                // Використовуємо .slideToLoop для коректного переходу.\n                swiperInstance.slideToLoop(i);\n            }\n        });\n        paginationContainer.appendChild(dot);\n    }\n}\n\n\nfunction initPaginationControls() {\n    document.getElementById('prevBtn').addEventListener('click', () => {\n        if (swiperInstance) {\n            swiperInstance.slidePrev();\n        }\n    });\n\n    document.getElementById('nextBtn').addEventListener('click', () => {\n        if (swiperInstance) {\n            swiperInstance.slideNext();\n        }\n    });\n}\n\nfunction updatePagination() {\n    if (!swiperInstance || swiperInstance.slides.length === 0) {\n        return;\n    }\n\n    // Swiper у режимі loop має додаткові дубльовані слайди на початку та в кінці.\n    // .realIndex дає індекс \"справжнього\" слайда (0, 1, 2)\n    const activeIndex = swiperInstance.realIndex;\n\n    document.querySelectorAll('.pagination span').forEach((span, index) => {\n        span.classList.remove('active');\n        if (index === activeIndex) {\n            span.classList.add('active');\n        }\n    });\n}\n\nfunction showNoFeedbacksMessage() {\n    wrapper.innerHTML = '<div class=\"swiper-slide\">Наразі відгуків немає</div>';\n    if (swiperInstance) {\n        swiperInstance.destroy(true, true);\n    }\n    paginationContainer.innerHTML = '';\n    document.getElementById('prevBtn').style.display = 'none';\n    document.getElementById('nextBtn').style.display = 'none';\n}\n\nfunction showErrorMessage() {\n    wrapper.innerHTML = '<div class=\"swiper-slide error-message\">Не вдалося завантажити відгуки. Спробуйте пізніше.</div>';\n    if (swiperInstance) {\n        swiperInstance.destroy(true, true);\n    }\n    paginationContainer.innerHTML = '';\n    document.getElementById('prevBtn').style.display = 'none';\n    document.getElementById('nextBtn').style.display = 'none';\n}\n\n\ndocument.addEventListener('DOMContentLoaded', fetchFeedbacks);"],"names":["wrapper","paginationContainer","swiperInstance","fetchFeedbacks","feedbacks","renderFeedbacks","initSwiper","initPaginationControls","err","showErrorMessage","fb","roundedRating","slide","generateStarRating","rating","starsHtml","i","updatePagination","createPaginationDots","totalDots","dot","activeIndex","span","index"],"mappings":"ssBAAA,MAAMA,EAAU,SAAS,eAAe,kBAAkB,EACpDC,EAAsB,SAAS,eAAe,YAAY,EAChE,IAAIC,EAEJ,eAAeC,GAAiB,CAC5B,GAAI,CACAH,EAAQ,UAAY,mEAUpB,IAAII,GANa,MAAM,MAAM,IAAI,gDAAiD,CAC9E,OAAQ,CACJ,MAAO,EACP,KAAM,CACT,CACb,CAAS,GACwB,KAAK,KAkB9B,IAjBI,QAAQ,IAAIA,CAAS,EAIrBA,GAAaA,EAAU,OAAS,IAChCA,EAAYA,EAAU,MAAM,EAAG,CAAC,GAIhC,CAACA,GAAaA,EAAU,OAQrBA,EAAU,OAAS,GACrBA,EAAU,KAAK,CAAE,KAAM,cAAcA,EAAU,OAAS,CAAC,GAAI,MAAO,qDAAsD,OAAQ,CAAG,CAAA,EAI1IC,EAAgBD,CAAS,EACzBE,IACAC,GAEH,OAAQC,EAAK,CACV,QAAQ,MAAM,oCAAqCA,CAAG,EACtDC,GACH,CACL,CAEA,SAASJ,EAAgBD,EAAW,CAChCJ,EAAQ,UAAY,GAEpBI,EAAU,QAAQM,GAAM,CACpB,MAAMC,EAAgB,KAAK,MAAMD,EAAG,MAAM,EACpCE,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,eAClBA,EAAM,UAAY;AAAA;AAAA,kBAERC,EAAmBF,CAAa,CAAC;AAAA;AAAA,iCAElBD,EAAG,KAAK;AAAA,gCACTA,EAAG,IAAI;AAAA,UAE/BV,EAAQ,YAAYY,CAAK,CACjC,CAAK,CACL,CAGA,SAASC,EAAmBC,EAAQ,CAChC,IAAIC,EAAY,GAChB,QAASC,EAAI,EAAGA,GAAK,EAAGA,IAChBA,GAAKF,EACLC,GAAa,mCAEbA,GAAa,yCAGrB,OAAOA,CACX,CAGA,SAAST,GAAa,CACdJ,GACAA,EAAe,QAAQ,GAAM,EAAI,EAIrCA,EAAiB,IAAI,OAAO,oBAAqB,CAC7C,KAAM,GACN,cAAe,EACf,aAAc,EACd,eAAgB,GAEhB,SAAU,GACV,eAAgB,GAChB,cAAe,GAGf,GAAI,CACA,YAAae,EACb,KAAMA,CACT,CACT,CAAK,EAGDC,EAAqB,CAAC,EACtBD,GACJ,CAEA,SAASC,EAAqBC,EAAW,CACrClB,EAAoB,UAAY,GAEhC,QAASe,EAAI,EAAGA,EAAIG,EAAWH,IAAK,CAChC,MAAMI,EAAM,SAAS,cAAc,MAAM,EACzCA,EAAI,GAAK,OAAOJ,CAAC,GACjBI,EAAI,iBAAiB,QAAS,IAAM,CAC5BlB,GAGAA,EAAe,YAAYc,CAAC,CAE5C,CAAS,EACDf,EAAoB,YAAYmB,CAAG,CACtC,CACL,CAGA,SAASb,GAAyB,CAC9B,SAAS,eAAe,SAAS,EAAE,iBAAiB,QAAS,IAAM,CAC3DL,GACAA,EAAe,UAAS,CAEpC,CAAK,EAED,SAAS,eAAe,SAAS,EAAE,iBAAiB,QAAS,IAAM,CAC3DA,GACAA,EAAe,UAAS,CAEpC,CAAK,CACL,CAEA,SAASe,GAAmB,CACxB,GAAI,CAACf,GAAkBA,EAAe,OAAO,SAAW,EACpD,OAKJ,MAAMmB,EAAcnB,EAAe,UAEnC,SAAS,iBAAiB,kBAAkB,EAAE,QAAQ,CAACoB,EAAMC,IAAU,CACnED,EAAK,UAAU,OAAO,QAAQ,EAC1BC,IAAUF,GACVC,EAAK,UAAU,IAAI,QAAQ,CAEvC,CAAK,CACL,CAYA,SAASb,GAAmB,CACxBT,EAAQ,UAAY,mGAChBE,GACAA,EAAe,QAAQ,GAAM,EAAI,EAErCD,EAAoB,UAAY,GAChC,SAAS,eAAe,SAAS,EAAE,MAAM,QAAU,OACnD,SAAS,eAAe,SAAS,EAAE,MAAM,QAAU,MACvD,CAGA,SAAS,iBAAiB,mBAAoBE,CAAc"}