{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["const wrapper = document.getElementById('feedback-wrapper');\nconst paginationContainer = document.getElementById('pagination');\nlet swiperInstance;\n\nasync function fetchFeedbacks() {\n    try {\n        wrapper.innerHTML = '<div class=\"swiper-slide loading\">Завантаження відгуків...</div>';\n        const response = await axios.get('https://sound-wave.b.goit.study/api/feedbacks', {\n            params: {\n                limit: 3, // Запит на 3 відгуки\n                page: 1\n            }\n        });\n        let feedbacks = response.data.data;\n            console.log(feedbacks);\n            \n        if (feedbacks && feedbacks.length > 3) {\n            feedbacks = feedbacks.slice(0, 3);\n        }\n \n        if (!feedbacks || feedbacks.length === 0) {\n            \"No feedback find\"\n        }\n        \n        while (feedbacks.length < 3) {\n             feedbacks.push({ name: `Користувач ${feedbacks.length + 1}`, descr: 'Наразі немає додаткових відгуків для відображення.', rating: 3 });\n        }\n\n\n        renderFeedbacks(feedbacks);\n        initSwiper();\n        initPaginationControls(); \n\n    } catch (err) {\n        console.error('Помилка при завантаженні відгуків', err);\n        showErrorMessage();\n    }\n}\n\nfunction renderFeedbacks(feedbacks) {\n    wrapper.innerHTML = '';\n\n    feedbacks.forEach(fb => {\n        const roundedRating = Math.round(fb.rating);\n        const slide = document.createElement('div');\n        slide.className = 'swiper-slide';\n        slide.innerHTML = `\n            <div class=\"rating\">\n                ${generateStarRating(roundedRating)}\n            </div>\n            <div class=\"text\">\"${fb.descr}\"</div>\n            <div class=\"user\">${fb.name}</div>\n        `;\n        wrapper.appendChild(slide);\n    });\n}\n\n//  генерації зірочок \nfunction generateStarRating(rating) {\n    let starsHtml = '';\n    for (let i = 1; i <= 5; i++) {\n        if (i <= rating) {\n            starsHtml += '<i class=\"fas fa-star star\"></i>'; \n        } else {\n            starsHtml += '<i class=\"fas fa-star star-empty\"></i>'; \n        }\n    }\n    return starsHtml;\n}\n\n\nfunction initSwiper() {\n    if (swiperInstance) {\n        swiperInstance.destroy(true, true);\n    }\n\n    //  Swiper \n    swiperInstance = new Swiper('.swiper-container', {\n        loop: true,\n        slidesPerView: 1,\n        spaceBetween: 0,\n        centeredSlides: true, \n        autoHeight: true, \n        speed: 700,\n        observer: true,\n        observeParents: true,\n        watchOverflow: true, \n        slidesOffsetBefore: 0, \n        slidesOffsetAfter: 0,  \n        on: {\n            slideChange: updatePagination,\n            init: updatePagination,\n        }\n    });\n\n    // пагінація\n    createPaginationDots(3);\n    updatePagination();\n}\n\nfunction createPaginationDots(totalDots) {\n    paginationContainer.innerHTML = ''; \n\n    for (let i = 0; i < totalDots; i++) {\n        const dot = document.createElement('span');\n        dot.id = `pag-${i}`;\n        dot.addEventListener('click', () => {\n            if (swiperInstance) {\n                swiperInstance.slideToLoop(i);\n            }\n        });\n        paginationContainer.appendChild(dot);\n    }\n}\n\n\nfunction initPaginationControls() {\n    document.getElementById('prevBtn').addEventListener('click', () => {\n        if (swiperInstance) {\n            swiperInstance.slidePrev();\n        }\n    });\n\n    document.getElementById('nextBtn').addEventListener('click', () => {\n        if (swiperInstance) {\n            swiperInstance.slideNext();\n        }\n    });\n}\n\nfunction updatePagination() {\n    if (!swiperInstance || swiperInstance.slides.length === 0) {\n        return;\n    }\n\n\n    const activeIndex = swiperInstance.realIndex;\n\n    document.querySelectorAll('.pagination span').forEach((span, index) => {\n        span.classList.remove('active');\n        if (index === activeIndex) {\n            span.classList.add('active');\n        }\n    });\n}\n\nfunction showNoFeedbacksMessage() {\n    wrapper.innerHTML = '<div class=\"swiper-slide\">Наразі відгуків немає</div>';\n    if (swiperInstance) {\n        swiperInstance.destroy(true, true);\n    }\n    paginationContainer.innerHTML = '';\n    document.getElementById('prevBtn').style.display = 'none';\n    document.getElementById('nextBtn').style.display = 'none';\n}\n\nfunction showErrorMessage() {\n    wrapper.innerHTML = '<div class=\"swiper-slide error-message\">Не вдалося завантажити відгуки. Спробуйте пізніше.</div>';\n    if (swiperInstance) {\n        swiperInstance.destroy(true, true);\n    }\n    paginationContainer.innerHTML = '';\n    document.getElementById('prevBtn').style.display = 'none';\n    document.getElementById('nextBtn').style.display = 'none';\n}\n\n\ndocument.addEventListener('DOMContentLoaded', fetchFeedbacks);"],"names":["wrapper","paginationContainer","swiperInstance","fetchFeedbacks","feedbacks","renderFeedbacks","initSwiper","initPaginationControls","err","showErrorMessage","fb","roundedRating","slide","generateStarRating","rating","starsHtml","updatePagination","createPaginationDots","totalDots","i","dot","activeIndex","span","index"],"mappings":"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"}